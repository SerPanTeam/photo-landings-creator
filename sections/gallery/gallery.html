<!-- ╔═══════════════════════════════════════════════════════════════════════════╗
     ║  GALLERY - Галерея изображений (Swiper.js слайдер)                        ║
     ║  Фон: backgroundColor | Изменить: style="background-color: #F5EDE0;"      ║
     ║  Стрелки: showArrows: true/false                                          ║
     ║  Пагинация: showPagination: true/false                                    ║
     ╚═══════════════════════════════════════════════════════════════════════════╝ -->

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

<section class="gallery section-padding" style="background-color: {{backgroundColor}};" aria-label="Fotogalerie">
  <div class="container">

    <!-- ══════════════════════════════════════════════════════════════════════════
         SWIPER ГАЛЕРЕЯ
         ══════════════════════════════════════════════════════════════════════════ -->
    <div class="swiper gallery-swiper">
      <div class="swiper-wrapper">
        {{#each images}}
        <div class="swiper-slide">
          <div class="gallery-item">
            {{#if this.src}}
            <!-- ИЗОБРАЖЕНИЕ - изменить src="..." для замены картинки -->
            <img src="{{this.src}}" alt="{{this.alt}}" class="img-fluid" loading="lazy">
            {{else}}
            <div class="img-placeholder" style="background-color: #7f7f7f;"></div>
            {{/if}}
          </div>
        </div>
        {{/each}}
      </div>

      <!-- Пагинация (точки) -->
      <div class="swiper-pagination"></div>

      {{#if showArrows}}
      <!-- Стрелки навигации -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
      {{/if}}
    </div>

  </div>
</section>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
  (function() {
    function initGallerySwiper() {
      new Swiper('.gallery-swiper', {
        slidesPerView: 1,
        spaceBetween: 15,
        loop: true,
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        breakpoints: {
          576: { slidesPerView: 2, spaceBetween: 15 },
          768: { slidesPerView: 2, spaceBetween: 20 },
          992: { slidesPerView: 3, spaceBetween: 20 },
        },
        grabCursor: true,
      });
    }

    // Инициализация: если DOM уже загружен - сразу, иначе ждём
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initGallerySwiper);
    } else {
      initGallerySwiper();
    }
  })();
</script>
