# Протокол проверки соответствия Figma

## Критические точки проверки

При сравнении сгенерированного HTML с макетом Figma **ОБЯЗАТЕЛЬНО** проверять:

---

### 1. ПОЗИЦИОНИРОВАНИЕ ЭЛЕМЕНТОВ (X/Y координаты)

**Частая ошибка:** Элементы на одной горизонтальной линии в Figma, но вертикально в HTML.

**Как проверять:**
1. Смотреть X и Y координаты в Figma metadata
2. Элементы с **похожими Y** и **разными X** = одна строка (row)
3. Элементы с **разными Y** = разные строки

**Пример ошибки (features секция):**
```
Figma:
- Subtitle: y=3175, x=102 (слева)
- Button: y=3046, x=1018 (справа)
→ Элементы должны быть в одной строке: текст слева, кнопка справа

Неправильно:
[Заголовок]
[Кнопка]
[Подзаголовок]

Правильно:
[Заголовок]
[Подзаголовок - слева] [Кнопка - справа]
```

---

### 2. ВЫРАВНИВАНИЕ ТЕКСТА

**Проверять:**
- `x ≈ 100-150` → LEFT aligned
- `x ≈ width/2` → CENTER aligned
- `x > width*0.6` → RIGHT aligned

**В HTML:**
- Left: без класса или `text-start`
- Center: `text-center`
- Right: `text-end`

---

### 3. КНОПКИ CTA

**Обязательно проверять:**
1. **Наличие** - есть ли кнопка в Figma?
2. **Позиция** - слева/справа/центр?
3. **Тип** - solid (btn-primary-custom) или outline (btn-outline-custom)?
4. **Текст** - точное совпадение?

**Частая ошибка:** CTA рендерится не там или не рендерится вовсе из-за условий в шаблоне.

---

### 4. LAYOUT СЕКЦИЙ

**Типичные layouts:**
| Layout | Описание | Bootstrap классы |
|--------|----------|------------------|
| Centered | Всё по центру | `text-center`, `mx-auto` |
| Two columns | Текст + изображение | `col-md-6` + `col-md-6` |
| Left-right row | Элементы в одну строку | `row` с `col-md-*` |
| Grid 2x2 | Сетка 2x2 | `col-md-6` × 4 |
| Grid 4col | 4 колонки | `col-lg-3` × 4 |

---

### 5. ЧЕК-ЛИСТ ПО СЕКЦИЯМ

#### Hero / Hero-fullwidth
- [ ] Logo позиция
- [ ] Заголовок: выделенные слова (titleHighlight)
- [ ] Описание: форматирование (абзацы)
- [ ] CTA кнопка: текст, позиция
- [ ] Изображения: размеры, позиции

#### Promotional
- [ ] Центрирование текста
- [ ] CTA: есть/нет, тип кнопки

#### Benefits
- [ ] Layout: 3col / 4col / 2x2
- [ ] cardStyle: plain / boxed
- [ ] Иконки: размеры

#### Features (КРИТИЧНО!)
- [ ] **ctaAfterTitle** - кнопка после заголовка?
- [ ] Позиция description относительно CTA
- [ ] Выравнивание элементов

#### Process
- [ ] Layout: vertical / horizontal
- [ ] cardStyle: plain / boxed
- [ ] CTA: есть/нет, позиция (ctaCentered)

#### FAQ / FAQ-cards
- [ ] Layout: accordion / 2x2 grid
- [ ] Заголовок центрирован?

#### Services
- [ ] Layout: grid / flat
- [ ] CTA: есть/нет, позиция

#### About
- [ ] Фото: left / right
- [ ] Линия-разделитель

---

## Алгоритм проверки

### Шаг 1: Получить Figma данные
```
mcp__figma__get_metadata({ nodeId: "XXX:YYY" })
mcp__figma__get_screenshot({ nodeId: "XXX:YYY" })
```

### Шаг 2: Построить таблицу элементов
| Элемент | Y (top) | X (left) | Width | Позиция |
|---------|---------|----------|-------|---------|
| Title | 2984 | 102 | 706 | LEFT |
| Button | 3046 | 1018 | 310 | RIGHT |
| Subtitle | 3175 | 102 | 590 | LEFT |

### Шаг 3: Определить строки
- Группировать элементы по близким Y значениям (±50px)
- Элементы в одной группе Y = одна строка

### Шаг 4: Сравнить с HTML
```bash
grep -A 30 'class="section-name' output.html | grep -E "col-|text-|row"
```

### Шаг 5: Исправить расхождения
1. Обновить config.json
2. Если нужно - обновить шаблон секции
3. Пересобрать: `node builder/builder.js landing-name`
4. Повторить проверку

---

## Найденные и исправленные ошибки

### 2024-01-09: Features секция - ctaAfterTitle

**Проблема:** Кнопка и подзаголовок были вертикально, а в Figma - горизонтально.

**Решение:** Добавлена опция `ctaAfterTitle: true` в features секцию:
```json
{
  "type": "features",
  "content": {
    "ctaAfterTitle": true,
    "centeredTitle": "...",
    "description": "...",
    "cta": { "text": "...", "isButton": true }
  }
}
```

**Результат:**
```
[Заголовок - слева]
[Description - col-6 слева] [CTA - col-6 справа]
```

---

## Общие правила

1. **Всегда проверять координаты X/Y** - не доверять визуальному сравнению
2. **Элементы с близкими Y = одна строка** в Bootstrap
3. **При сомнениях - смотреть metadata**, не только screenshot
4. **После исправлений - пересобрать и проверить снова**
5. **Документировать найденные ошибки** в этом файле
